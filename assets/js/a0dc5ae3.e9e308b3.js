"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7163],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return n?r.createElement(h,i(i({ref:t},u),{},{components:n})):r.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2835:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={title:"Multithreading"},i=void 0,l={unversionedId:"features/multi-thread",id:"features/multi-thread",title:"Multithreading",description:"What is Multithreading?",source:"@site/docs/features/multi-thread.md",sourceDirName:"features",slug:"/features/multi-thread",permalink:"/features/multi-thread",draft:!1,editUrl:"https://github.com/janhq/nitro/tree/main/docs/docs/features/multi-thread.md",tags:[],version:"current",lastUpdatedBy:"automaticcat",lastUpdatedAt:1700452306,formattedLastUpdatedAt:"Nov 20, 2023",frontMatter:{title:"Multithreading"},sidebar:"docsSidebar",previous:{title:"Embedding",permalink:"/features/embed"},next:{title:"Continuous Batching",permalink:"/features/cont-batch"}},s={},p=[{value:"What is Multithreading?",id:"what-is-multithreading",level:2},{value:"Drogon&#39;s Threading Model",id:"drogons-threading-model",level:2},{value:"Why it&#39;s important",id:"why-its-important",level:2},{value:"Enabling More Threads on Nitro",id:"enabling-more-threads-on-nitro",level:2},{value:"Acknowledgements",id:"acknowledgements",level:2}],u={toc:p},d="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"what-is-multithreading"},"What is Multithreading?"),(0,a.kt)("p",null,"Multithreading is a programming concept where a process executes multiple threads simultaneously, improving efficiency and performance. It allows concurrent execution of tasks, such as data processing or user interface updates. This technique is crucial for optimizing hardware usage and enhancing application responsiveness."),(0,a.kt)("h2",{id:"drogons-threading-model"},"Drogon's Threading Model"),(0,a.kt)("p",null,"Nitro powered by Drogon, a high-speed C++ web application framework, utilizes a thread pool where each thread possesses its own event loop. These event loops are central to Drogon's functionality:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Main Loop"),": Runs on the main thread, responsible for starting worker loops."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Worker Loops"),": Handle tasks and network events, ensuring efficient task execution without blocking.")),(0,a.kt)("h2",{id:"why-its-important"},"Why it's important"),(0,a.kt)("p",null,"Understanding and effectively using multithreading in Drogon is crucial for several reasons:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Optimized Performance"),":  Multithreading enhances application efficiency by enabling simultaneous task execution for faster response times.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Non-blocking IO Operations"),": Utilizing multiple threads prevents long-running tasks from blocking the entire application, ensuring high responsiveness.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Deadlock Avoidance"),": Event loops and threads helps prevent deadlocks, ensuring smoother and uninterrupted application operation.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Effective Resource Utilization"),": Distributing tasks across multiple threads leads to more efficient use of server resources, improving overall performance.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Async Programming"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Scalability")))),(0,a.kt)("h2",{id:"enabling-more-threads-on-nitro"},"Enabling More Threads on Nitro"),(0,a.kt)("p",null,"To increase the number of threads used by Nitro, use the following command syntax:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"nitro [thread_num] [host] [port]\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"thread_num:")," Specifies the number of threads for the Nitro server."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"host:")," The host address normally ",(0,a.kt)("inlineCode",{parentName:"li"},"127.0.0.1")," (localhost) or ",(0,a.kt)("inlineCode",{parentName:"li"},"0.0.0.0")," (all interfaces)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"port:")," The port number where Nitro is to be deployed.")),(0,a.kt)("p",null,"To launch Nitro with 4 threads, enter this command in the terminal:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"nitro 4 127.0.0.1 5000\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"After enabling multithreading, monitor your system's performance. Adjust the ",(0,a.kt)("inlineCode",{parentName:"p"},"thread_num")," as needed to optimize throughput and latency based on your workload.")),(0,a.kt)("h2",{id:"acknowledgements"},"Acknowledgements"),(0,a.kt)("p",null,"For more information on Drogon's threading, visit ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/drogonframework/drogon/wiki/ENG-FAQ-1-Understanding-drogon-threading-model"},"Drogon's Documentation"),"."))}c.isMDXComponent=!0}}]);